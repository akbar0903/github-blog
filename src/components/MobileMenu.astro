---
import navData from '@/data/nav-data'
import { Icon } from 'astro-icon/components'
---

<div class="md:hidden">
  <button
    id="hamburger"
    class="inline-flex items-center justify-center transition-colors hover:bg-hover-back text-content-primary cursor-pointer border-br border rounded-md p-2"
  >
    <Icon name="mdi:menu" class="w-4 h-4 fill-content-secondary" />
  </button>

  <!-- 遮罩层 -->
  <div id="overlay" class="hidden fixed inset-0 z-10 bg-black opacity-30"></div>

  <aside
    class="fixed top-0 left-0 z-20 h-screen max-w-[320px] w-full -translate-x-full transition-transform duration-300 ease-in-out bg-back rounded-r-xl"
  >
    <div class="flex items-center justify-between w-full p-4">
     <a href="/">
       <Icon name="mdi:github" class="w-8 h-8" />
     </a>
      <button id="menu-close" class="p-2 bg-hover-back rounded-md font-semibold cursor-pointer"
        ><svg
          class="w-4 fill-content-secondary"
          aria-hidden="true"
          viewBox="0 0 16 16"
          version="1.1"
          data-view-component="true"
        >
          <path
            d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z"
          ></path>
        </svg></button
      >
    </div>

    <nav class="pt-4 px-6">
      <ul class="flex flex-col justify-center gap-3 font-normal text-content-primary text-base">
        {
          navData.map((item) => (
            <li>
              <a href={item.href} class="flex text-lg items-center gap-2 font-semibold">
                <Icon name={item.icon} class="w-4 h-4" />
                <span>{item.name}</span>
              </a>
            </li>
          ))
        }
      </ul>
    </nav>
  </aside>
</div>

<script>
  const hamburger = document.querySelector('#hamburger')
  const overlay = document.querySelector('#overlay')
  const menuContainer = document.querySelector('aside')
  const menuCloseButton = document.querySelector('#menu-close')

  hamburger?.addEventListener('click', () => {
    overlay?.classList.remove('hidden')
    menuContainer?.classList.remove('-translate-x-full')
  })

  overlay?.addEventListener('click', () => {
    overlay.classList.add('hidden')
    menuContainer?.classList.add('-translate-x-full')
  })

  menuCloseButton?.addEventListener('click', () => {
    overlay?.classList.add('hidden')
    menuContainer?.classList.add('-translate-x-full')
  })
</script>
