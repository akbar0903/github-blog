---
import Layout from './Layout.astro'
import ArticleToc from "../components/ArticleToc.astro";
import { Icon } from "astro-icon/components";

const { frontmatter } = Astro.props
const { headings } = Astro.props
---

<Layout title={ frontmatter.title }>
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 my-4 md:m-4">
        <article>
            <h1>{ frontmatter.title }</h1>
            <div class="flex items-center gap-2 text-content-secondary">
                <div class="flex items-center gap-1">
                    <Icon name="mdi:calendar-range-outline"/>
                    <span>{ frontmatter.date }</span>
                </div>
                <span>|</span>
                <span>#{ frontmatter.category }</span>
            </div>
            <!-- article content -->
            <slot/>
        </article>

        <div class="hidden md:block w-full md:col-span-1 relative">
            <div class="sticky top-20 max-h-1/2 h-80 flex flex-col card-style">
                <h3 class="font-semibold text-lg mb-2 text-primary">文章目录</h3>
                <div class="flex-1 overflow-y-auto overflow-x-hidden toc-wrapper">
                    <ArticleToc headings={ headings }/>
                </div>
            </div>
        </div>
    </div>
</Layout>
